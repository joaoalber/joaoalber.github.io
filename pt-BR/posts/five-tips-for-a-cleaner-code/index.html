<!doctype html><html lang=pt-BR><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><meta content="Como melhorar suas habilidades no c√≥digo" name=description><meta content=website property=og:type><meta content="5 Dicas para um C√≥digo mais Limpo" property=og:title><meta content="Como melhorar suas habilidades no c√≥digo" property=og:description><meta content=https://ucarecdn.com/d8d4a8d7-1d6a-4838-944f-a29339e12f4a/profile.jfif property=og:image><title>5 Dicas para um C√≥digo mais Limpo</title><link href=https://ucarecdn.com/8667b014-947f-4948-be94-1c6e0a949e5b/favicon32x32.png rel=icon sizes=32x32 type=image/png><link href=https://ucarecdn.com/e99ec89d-26d8-4e5f-9e36-9998de8c94c1/favicon16x16.png rel=icon sizes=16x16 type=image/png><link href=https://ucarecdn.com/8531b376-27ae-4f21-bf74-78be1af0a0d5/appletouchicon.png rel=apple-touch-icon sizes=180x180><style>body{--primary-color:#5871a2;--primary-pale-color:#5871a210;--text-color:#3c4043;--text-pale-color:#a3a5a9;--bg-color:#fff;--highlight-mark-color:#5f75b035;--blockquote-color:#8e8d91;--callout-note-color:#5871a2;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body.dark{--primary-color:#5d77ac;--primary-pale-color:#5d77ac20;--text-color:#9197a5;--text-pale-color:#656a74;--bg-color:#18191b;--highlight-mark-color:#5f75b035;--blockquote-color:#747983;--callout-note-color:#5d77ac;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body{--main-font:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--code-font:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--homepage-max-width:768px;--main-max-width:768px;--avatar-size:56px;--homepage-font-size:16px;--homepage-line-height:1.75;--paragraph-font-size:16px;--paragraph-line-height:1.75;--aside-font-size:15px;--img-border-radius:0px;--detail-border-radius:0px;--dark-mode-img-brightness:.75;--dark-mode-chart-brightness:.75;--inline-code-border-radius:2px;--inline-code-bg-color:var(--primary-pale-color);--block-code-border-radius:0px;--block-code-border-color:var(--primary-color);--detail-border-color:var(--primary-color)}</style><link href=/main.css rel=stylesheet><link href=/hl-light.css id=hl rel=stylesheet><body class=post><script>const theme=sessionStorage.getItem(`theme`);const match=window.matchMedia(`(prefers-color-scheme: dark)`).matches;if(theme&&theme==`dark`||!theme&&match){document.body.classList.add(`dark`);const a=document.querySelector(`link#hl`);if(a)a.href=`/hl-dark.css`}</script><header><div id=header-wrapper><nav><a class=instant href=/pt-BR>joaoalber</a><button aria-label="toggle expand" class=separator id=toggler>::</button><span class="wrap left fold">{</span><a class="instant fold" href=/pt-BR/posts>artigos</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/pt-BR/about>sobre</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/pt-BR/projects>projetos</a><span class="wrap right fold">} ;</span></nav><div id=btns><button aria-label="theme switch" id=theme-toggle><span class=moon-icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill=currentColor></path></svg></span> <span class=sun-icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill=currentColor></path></svg></span></button><button aria-label="table of content" id=toc-toggle><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M3 4H21V6H3V4ZM3 11H15V13H3V11ZM3 18H21V20H3V18Z" fill=currentColor></path></svg></button></div></div></header><div id=wrapper><div id=blank></div><aside><nav><ul><li><a class=h2 href=#introducao>Introdu√ß√£o</a><li><a class=h2 href=#1-nomeando-as-coisas>1. Nomeando as Coisas</a><li><a class=h2 href=#2-melhorando-condicionais>2. Melhorando Condicionais</a><li><a class=h2 href=#3-tratamento-de-erros>3. Tratamento de Erros</a><li><a class=h2 href=#4-evitando-comentarios-desnecessarios>4. Evitando Coment√°rios Desnecess√°rios</a><li><a class=h2 href=#5-melhorando-os-testes>5. Melhorando os Testes</a><li><a class=h2 href=#conclusao>Conclus√£o</a></ul></nav><button aria-label="back to top" id=back-to-top><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z" fill=currentColor></path></svg></button></aside><main><div><div data-check-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="currentColor"></path></svg>' data-copy-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>' id=copy-cfg style=display:none></div><article data-backlink-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M9.41421 8L18.0208 16.6066L16.6066 18.0208L8 9.41421V17H6V6H17V8H9.41421Z" fill="currentColor"></path></svg>' class=prose><h1>5 Dicas para um C√≥digo mais Limpo</h1><div id=post-info><div id=date><span id=publish>2022-04-20</span></div><div id=tags><a class=instant href=https://joaoalber.github.io/pt-BR/tags/clean-code><span>#</span>clean code</a><a class=instant href=https://joaoalber.github.io/pt-BR/tags/ruby><span>#</span>ruby</a><a class=instant href=https://joaoalber.github.io/pt-BR/tags/teste><span>#</span>teste</a><a class=instant href=https://joaoalber.github.io/pt-BR/tags/rspec><span>#</span>rspec</a></div></div><h1 id=introducao>Introdu√ß√£o<a aria-label="Anchor link for: introducao" class=zola-anchor href=#introducao style=visibility:hidden></a></h1><p>Atualmente, a √°rea de tecnologia tem um enorme dinamismo e isso significa que os desenvolvedores est√£o mudando seus empregos mais do que nunca.<p>N√≥s realmente escrevemos c√≥digo para uma m√°quina? N√£o devemos esquecer que existem outras pessoas escrevendo c√≥digo na mesma base de c√≥digo que a nossa.<p>Existem muitas opini√µes e estruturas que definem um c√≥digo como ‚Äúbom‚Äù. N√£o √© necessariamente o c√≥digo mais curto, mas uma maneira melhor de expressar o que seu c√≥digo significa.<p>Todos os exemplos abaixo foram feitos na <a rel="nofollow noreferrer" href=https://www.ruby-lang.org/pt/>linguagem Ruby</a><h1 id=1-nomeando-as-coisas>1. Nomeando as Coisas<a aria-label="Anchor link for: 1-nomeando-as-coisas" class=zola-anchor href=#1-nomeando-as-coisas style=visibility:hidden></a></h1><p>Por que nomear as coisas √© importante? Imagine que voc√™ est√° entrando em uma nova empresa e tentando descobrir o que significa esse trecho de c√≥digo em um contexto de filmes:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">first_elements</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">array</span><span class="z-punctuation z-separator z-ruby">,</span> <span class="z-variable z-parameter z-ruby">count</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">  array<span class="z-punctuation z-accessor z-dot z-ruby">.</span>take<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>count<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>√â clara a inten√ß√£o do c√≥digo? A √∫nica coisa que podemos assumir √© que estamos pegando os primeiros elementos de um <em>array</em>, mas o que √© esse <em>array</em>? O que significa <em>count</em>?<p>E agora:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">most_watched_movies</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">watched_movies</span><span class="z-punctuation z-separator z-ruby">,</span> <span class="z-variable z-parameter z-ruby">top_ranking</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">  watched_movies<span class="z-punctuation z-accessor z-dot z-ruby">.</span>take<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>top_ranking<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Melhor, certo?<p>Nomear as coisas melhora a comunica√ß√£o entre todos que est√£o ‚Äúcodando‚Äù na mesma base de c√≥digo e quanto mais expl√≠cito voc√™ for √© melhor.<h1 id=2-melhorando-condicionais>2. Melhorando Condicionais<a aria-label="Anchor link for: 2-melhorando-condicionais" class=zola-anchor href=#2-melhorando-condicionais style=visibility:hidden></a></h1><p>Temos algumas maneiras de melhorar as condicionais do c√≥digo, por exemplo:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">case</span> mobile_phone_brand
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">when</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Samsung<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">  <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Galaxy<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">when</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Apple<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">  <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>iPhone<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">when</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Xiaomi<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">  <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>MI<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Voc√™ imagina uma maneira melhor de fazer esse <em>switch case</em>? Parece que esses valores deveriam ser constantes, ent√£o‚Ä¶ Que tal isso:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-constant z-ruby"><span class="z-entity z-name z-constant z-ruby">MOBILE_PHONE_BRAND</span></span> <span class="z-keyword z-operator z-assignment z-ruby">=</span> <span class="z-punctuation z-section z-scope z-ruby">{</span>
</span><span class="z-source z-ruby">   <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Samsung<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Galaxy<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span><span class="z-punctuation z-separator z-sequence z-ruby">,</span>
</span><span class="z-source z-ruby">   <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Apple<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>iPhone<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span><span class="z-punctuation z-separator z-sequence z-ruby">,</span>
</span><span class="z-source z-ruby">   <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Xiaomi<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>MI<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-punctuation z-section z-scope z-ruby">}</span>
</span></code></pre><p>Traduzimos todo o <em>switch case</em> em um <em>hash</em>, e agora ficou mais f√°cil de entender.<p>O pr√≥ximo pode salvar sua vida em muitas vezes, e √© recomendado pelo <a rel="nofollow noreferrer" href=https://github.com/rubocop/ruby-style-guide>Ruby Style Guides</a> üòä<p>Voc√™ j√° ouviu falar sobre <strong>early return</strong> ou <strong>guard clause</strong>?<p>¬†<p><img alt="Alt text" src=https://miro.medium.com/v2/resize:fit:4800/format:webp/1*ZUEXaTRBgZWkWSWcLHUCGw.png><p>¬†<p>‚ÄúIf-Else Hadouken‚Äù ‚Äî <a rel="nofollow noreferrer" href=https://miro.medium.com/max/1400/1*mL04Mh-tDosU6_OlqexwyQ.jpeg>REFER√äNCIA DO MEME AQUI</a>:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_coins</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">user</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-control z-ruby">if</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>valid?
</span><span class="z-source z-ruby">     <span class="z-keyword z-control z-ruby">if</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>premium?
</span><span class="z-source z-ruby">       <span class="z-keyword z-control z-ruby">if</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>has_coupon?
</span><span class="z-source z-ruby">         <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> send coins
</span></span><span class="z-source z-ruby">       <span class="z-keyword z-control z-ruby">else</span> 
</span><span class="z-source z-ruby">         <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User has not a coupon<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">       <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby">     <span class="z-keyword z-control z-ruby">else</span>
</span><span class="z-source z-ruby">       <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User is not premium<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">     <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-control z-ruby">else</span>
</span><span class="z-source z-ruby">     <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User invalid<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Quando voc√™ se depara com esse trecho de c√≥digo √© dif√≠cil entender o que est√° acontecendo, n√£o √©? Calma, podemos melhorar:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_coins</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">user</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-pseudo-method z-ruby">return</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User invalid<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-keyword z-control z-ruby">unless</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>valid?
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-pseudo-method z-ruby">return</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User has not a coupon<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-keyword z-control z-ruby">unless</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>has_coupon?
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-pseudo-method z-ruby">return</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User is not premium<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-keyword z-control z-ruby">unless</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>premium?
</span><span class="z-source z-ruby">
</span><span class="z-source z-ruby">  <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> send coins
</span></span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>O ‚ÄúI_f-Else_ Hadouken‚Äù acabou. Tudo o que fizemos foi dividir as etapas em pequenos peda√ßos e acabar com a bagun√ßa das condicionais. E tem muitos benef√≠cios:<ul><li>√â mais f√°cil de manter<li>Evita o esfor√ßo cognitivo<li>Melhora a legibilidade</ul><p>Acredite, se voc√™ tentar melhorar as condicionais, sua vida (e a dos outros) ser√° melhor<h1 id=3-tratamento-de-erros>3. Tratamento de Erros<a aria-label="Anchor link for: 3-tratamento-de-erros" class=zola-anchor href=#3-tratamento-de-erros style=visibility:hidden></a></h1><p>O tratamento de erros √© importante para fazer as coisas funcionarem, se voc√™ n√£o fizer isso corretamente, se alguma exce√ß√£o surgir, ser√° mais dif√≠cil entender o que est√° acontecendo em determinado contexto.<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_notification</span></span>
</span><span class="z-source z-ruby">  <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> do a HTTP request
</span></span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Imagine essa situa√ß√£o, existe uma notifica√ß√£o cr√≠tica pro contexto, e se ocorrer algum erro na requisi√ß√£o HTTP? Nesse caso, ele lan√ßar√° alguma exce√ß√£o do cliente HTTP (se o cliente lidar com isso) e ser√° dif√≠cil entender o que est√° acontecendo.<p>Voc√™ deve captur√°-lo e determinar o que far√° com o erro:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_notification</span></span>
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">begin</span>
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> do a HTTP request
</span></span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">rescue</span> <span class="z-variable z-other z-constant z-ruby">StandardError</span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> error
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> do something with this error
</span></span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> could render, retry, log or send it to a monitoring system
</span></span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><blockquote class="callout tip"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M9.97308 18H11V13H13V18H14.0269C14.1589 16.7984 14.7721 15.8065 15.7676 14.7226C15.8797 14.6006 16.5988 13.8564 16.6841 13.7501C17.5318 12.6931 18 11.385 18 10C18 6.68629 15.3137 4 12 4C8.68629 4 6 6.68629 6 10C6 11.3843 6.46774 12.6917 7.31462 13.7484C7.40004 13.855 8.12081 14.6012 8.23154 14.7218C9.22766 15.8064 9.84103 16.7984 9.97308 18ZM10 20V21H14V20H10ZM5.75395 14.9992C4.65645 13.6297 4 11.8915 4 10C4 5.58172 7.58172 2 12 2C16.4183 2 20 5.58172 20 10C20 11.8925 19.3428 13.6315 18.2443 15.0014C17.624 15.7748 16 17 16 18.5V21C16 22.1046 15.1046 23 14 23H10C8.89543 23 8 22.1046 8 21V18.5C8 17 6.37458 15.7736 5.75395 14.9992Z" fill=currentColor></path></svg></div><div class=content><p>Quando voc√™ n√£o especifica o erro em Ruby, ele ir√° capturar qualquer erro que estenda a classe <em>StandardError</em>, para mais informa√ß√µes verifique a <a rel="nofollow noreferrer" href=https://guru-sp.github.io/tutorial_ruby/excecoes.html>hierarquia de erros em Ruby</a></div></blockquote><blockquote class="callout warning"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12.865 3.00017L22.3912 19.5002C22.6674 19.9785 22.5035 20.5901 22.0252 20.8662C21.8732 20.954 21.7008 21.0002 21.5252 21.0002H2.47266C1.92037 21.0002 1.47266 20.5525 1.47266 20.0002C1.47266 19.8246 1.51886 19.6522 1.60663 19.5002L11.1329 3.00017C11.4091 2.52187 12.0206 2.358 12.4989 2.63414C12.651 2.72191 12.7772 2.84815 12.865 3.00017ZM4.20471 19.0002H19.7932L11.9989 5.50017L4.20471 19.0002ZM10.9989 16.0002H12.9989V18.0002H10.9989V16.0002ZM10.9989 9.00017H12.9989V14.0002H10.9989V9.00017Z" fill=currentColor></path></svg></div><div class=content><p><strong>Nunca</strong> especifique o erro <em>Exception</em> ao capturar, se voc√™ fizer isso, <strong>todos</strong> os erros do seu sistema podem ser capturados. Quanto mais espec√≠fico for o seu erro, melhor para determinar o que voc√™ precisa fazer, √© o seu <em>fallback</em>.</div></blockquote><h1 id=4-evitando-comentarios-desnecessarios>4. Evitando Coment√°rios Desnecess√°rios<a aria-label="Anchor link for: 4-evitando-comentarios-desnecessarios" class=zola-anchor href=#4-evitando-comentarios-desnecessarios style=visibility:hidden></a></h1><p>Parece ser simples, n√£o √©? Alguns dias atr√°s eu estava ‚Äúcodando‚Äù em um sistema legado e me deparei com o seguinte:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> C57
</span></span><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">something</span></span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-operator z-range z-ruby">...</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Beleza, agora me fala‚Ä¶ Voc√™ sabe o que significa C57? Passei um tempinho pra perceber que n√£o significa NADA üòÖ<p><img alt="Alt text" src=https://miro.medium.com/v2/resize:fit:640/format:webp/1*JxoTBullcH8srYMZVkWd1w.png><p>Em geral, coment√°rios desnecess√°rios podem causar confus√£o e gastar tempo e, hoje em dia, tempo √© dinheiro‚Ä¶<h1 id=5-melhorando-os-testes>5. Melhorando os Testes<a aria-label="Anchor link for: 5-melhorando-os-testes" class=zola-anchor href=#5-melhorando-os-testes style=visibility:hidden></a></h1><p>Todos sabemos que testar √© uma coisa boa, os testes podem evitar muitos <em>bugs</em> e ser um complemento para a documenta√ß√£o<p>Mas e escrever bons testes?<p>Quando come√ßo a escrever algum teste, penso que preciso ser claro porque muitos desenvolvedores usar√£o esse teste para entender as regras da aplica√ß√£o. Ent√£o, eu sigo o padr√£o <a rel="nofollow noreferrer" href=http://xunitpatterns.com/Four%20Phase%20Test.html>Four-Phase Test</a>:<p>Testes podem ser separados em quatro etapas: <em>Arrange, Act, Assert</em> e <em>Teardown.</em><p>Que podem ser resumidos em: preparar tudo para o teste, estimular o que ser√° testado, verificar se o resultado √© o esperado e limpar tudo o que foi feito durante aquele teste.<blockquote class="callout tip"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M9.97308 18H11V13H13V18H14.0269C14.1589 16.7984 14.7721 15.8065 15.7676 14.7226C15.8797 14.6006 16.5988 13.8564 16.6841 13.7501C17.5318 12.6931 18 11.385 18 10C18 6.68629 15.3137 4 12 4C8.68629 4 6 6.68629 6 10C6 11.3843 6.46774 12.6917 7.31462 13.7484C7.40004 13.855 8.12081 14.6012 8.23154 14.7218C9.22766 15.8064 9.84103 16.7984 9.97308 18ZM10 20V21H14V20H10ZM5.75395 14.9992C4.65645 13.6297 4 11.8915 4 10C4 5.58172 7.58172 2 12 2C16.4183 2 20 5.58172 20 10C20 11.8925 19.3428 13.6315 18.2443 15.0014C17.624 15.7748 16 17 16 18.5V21C16 22.1046 15.1046 23 14 23H10C8.89543 23 8 22.1046 8 21V18.5C8 17 6.37458 15.7736 5.75395 14.9992Z" fill=currentColor></path></svg></div><div class=content><p>Em Ruby, quando estamos fazendo transa√ß√µes no banco de dados, o <em>teardown</em> ocorre ‚Äúautomagicamente‚Äù, fazendo um <em>rollback</em> a cada transa√ß√£o durante o fim do teste</div></blockquote><p>Exemplo:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby">describe <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-double z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">"</span>#perform<span class="z-punctuation z-definition z-string z-end z-ruby">"</span></span></span> <span class="z-keyword z-control z-start-block z-ruby">do</span>
</span><span class="z-source z-ruby">  it <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-double z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">"</span>sends event to Sentry<span class="z-punctuation z-definition z-string z-end z-ruby">"</span></span></span> <span class="z-keyword z-control z-start-block z-ruby">do</span>   
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> Arrange
</span></span><span class="z-source z-ruby">    event <span class="z-keyword z-operator z-assignment z-ruby">=</span> <span class="z-punctuation z-section z-scope z-ruby">{</span> <span class="z-constant z-other z-symbol z-ruby">message<span class="z-punctuation z-definition z-constant z-ruby">:</span></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-double z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">"</span>an error event<span class="z-punctuation z-definition z-string z-end z-ruby">"</span></span></span> <span class="z-punctuation z-section z-scope z-ruby">}</span>
</span><span class="z-source z-ruby">    worker <span class="z-keyword z-operator z-assignment z-ruby">=</span> described_class<span class="z-punctuation z-accessor z-dot z-ruby">.</span><span class="z-keyword z-other z-special-method z-ruby">new</span>
</span><span class="z-source z-ruby">    allow<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-variable z-other z-constant z-ruby">Raven</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>to receive<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-constant z-other z-symbol z-ruby"><span class="z-punctuation z-definition z-constant z-ruby">:</span>send_event</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>with<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>event<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby">      
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> Act
</span></span><span class="z-source z-ruby">    worker<span class="z-punctuation z-accessor z-dot z-ruby">.</span>perform<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>event<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby">
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> Assert
</span></span><span class="z-source z-ruby">    expect<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-variable z-other z-constant z-ruby">Raven</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>to have_received<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-constant z-other z-symbol z-ruby"><span class="z-punctuation z-definition z-constant z-ruby">:</span>send_event</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>with<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>event<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>√â f√°cil ver cada etapa do teste de unidade, dividir em partes menores torna as coisas menos complicadas.<h1 id=conclusao>Conclus√£o<a aria-label="Anchor link for: conclusao" class=zola-anchor href=#conclusao style=visibility:hidden></a></h1><p>Essas dicas podem gui√°-lo na sua jornada de desenvolvedor, seu c√≥digo ficar√° mais limpo e mais importante: ajudar√° outros desenvolvedores a entender seu c√≥digo.<p>E n√£o se esque√ßa:<blockquote><p><em>Os programadores devem evitar deixar pistas falsas que obscure√ßam o significado do c√≥digo.</em> (tradu√ß√£o literal)‚Äî Robert C. Martin</blockquote><p>Obrigado pela leitura!! üçª</article><div class=giscus></div></div><footer><div class=copyright><p>¬© 2025 Jo√£o Rossi</div><div class=credits>powered by <a rel="noreferrer noopener" href=https://www.getzola.org target=_blank>zola</a> and <a rel="noreferrer noopener" href=https://github.com/isunjn/serene target=_blank>serene</a></div></footer></main></div><script src=/js/lightense.min.js></script><script src=/js/main.js></script>