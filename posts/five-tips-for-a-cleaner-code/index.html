<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><meta content="How to improve your coding skills" name=description><meta content=website property=og:type><meta content="5 Tips for a Cleaner Code" property=og:title><meta content="How to improve your coding skills" property=og:description><meta content=https://ucarecdn.com/d8d4a8d7-1d6a-4838-944f-a29339e12f4a/profile.jfif property=og:image><title>5 Tips for a Cleaner Code</title><link href=https://ucarecdn.com/8667b014-947f-4948-be94-1c6e0a949e5b/favicon32x32.png rel=icon sizes=32x32 type=image/png><link href=https://ucarecdn.com/e99ec89d-26d8-4e5f-9e36-9998de8c94c1/favicon16x16.png rel=icon sizes=16x16 type=image/png><link href=https://ucarecdn.com/8531b376-27ae-4f21-bf74-78be1af0a0d5/appletouchicon.png rel=apple-touch-icon sizes=180x180><style>body{--primary-color:#5871a2;--primary-pale-color:#5871a210;--text-color:#3c4043;--text-pale-color:#a3a5a9;--bg-color:#fff;--highlight-mark-color:#5f75b035;--blockquote-color:#8e8d91;--callout-note-color:#5871a2;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body.dark{--primary-color:#5d77ac;--primary-pale-color:#5d77ac20;--text-color:#9197a5;--text-pale-color:#656a74;--bg-color:#18191b;--highlight-mark-color:#5f75b035;--blockquote-color:#747983;--callout-note-color:#5d77ac;--callout-important-color:#8062b0;--callout-warning-color:#936e51;--callout-alert-color:#bc5252;--callout-question-color:#477389;--callout-tip-color:#3c8460}body{--main-font:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--code-font:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--homepage-max-width:768px;--main-max-width:768px;--avatar-size:56px;--homepage-font-size:16px;--homepage-line-height:1.75;--paragraph-font-size:16px;--paragraph-line-height:1.75;--aside-font-size:15px;--img-border-radius:0px;--detail-border-radius:0px;--dark-mode-img-brightness:.75;--dark-mode-chart-brightness:.75;--inline-code-border-radius:2px;--inline-code-bg-color:var(--primary-pale-color);--block-code-border-radius:0px;--block-code-border-color:var(--primary-color);--detail-border-color:var(--primary-color)}</style><link href=/main.css rel=stylesheet><link href=/hl-light.css id=hl rel=stylesheet><body class=post><script>const theme=sessionStorage.getItem(`theme`);const match=window.matchMedia(`(prefers-color-scheme: dark)`).matches;if(theme&&theme==`dark`||!theme&&match){document.body.classList.add(`dark`);const a=document.querySelector(`link#hl`);if(a)a.href=`/hl-dark.css`}</script><header><div id=header-wrapper><nav><a class=instant href=/>joaoalber</a><button aria-label="toggle expand" class=separator id=toggler>::</button><span class="wrap left fold">{</span><a class=instant href=/posts>posts</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/about>about</a><span class="wrap-separator fold">,</span><a class="instant fold" href=/projects>projects</a><span class="wrap right fold">} ;</span></nav><div id=btns><button aria-label="theme switch" id=theme-toggle><span class=moon-icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill=currentColor></path></svg></span> <span class=sun-icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill=currentColor></path></svg></span></button><button aria-label="table of content" id=toc-toggle><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M3 4H21V6H3V4ZM3 11H15V13H3V11ZM3 18H21V20H3V18Z" fill=currentColor></path></svg></button></div></div></header><div id=wrapper><div id=blank></div><aside><nav><ul><li><a class=h2 href=#introduction>Introduction</a><li><a class=h2 href=#1-naming-stuff>1. Naming Stuff</a><li><a class=h2 href=#2-improving-conditionals>2. Improving Conditionals</a><li><a class=h2 href=#3-error-handling>3. Error Handling</a><li><a class=h2 href=#4-avoiding-unnecessary-comments>4. Avoiding Unnecessary Comments</a><li><a class=h2 href=#5-writing-better-tests>5. Writing Better Tests</a><li><a class=h2 href=#conclusion>Conclusion</a></ul></nav><button aria-label="back to top" id=back-to-top><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z" fill=currentColor></path></svg></button></aside><main><div><div data-check-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z" fill="currentColor"></path></svg>' data-copy-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>' id=copy-cfg style=display:none></div><article data-backlink-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M9.41421 8L18.0208 16.6066L16.6066 18.0208L8 9.41421V17H6V6H17V8H9.41421Z" fill="currentColor"></path></svg>' class=prose><h1>5 Tips for a Cleaner Code</h1><div id=post-info><div id=date><span id=publish>2022-04-20</span></div><div id=tags><a class=instant href=https://joaoalber.github.io/tags/clean-code><span>#</span>clean code</a><a class=instant href=https://joaoalber.github.io/tags/ruby><span>#</span>ruby</a><a class=instant href=https://joaoalber.github.io/tags/test><span>#</span>test</a><a class=instant href=https://joaoalber.github.io/tags/rspec><span>#</span>rspec</a></div></div><h1 id=introduction>Introduction<a aria-label="Anchor link for: introduction" class=zola-anchor href=#introduction style=visibility:hidden></a></h1><p>Nowadays, the tech area has a huge dynamism and it means that developers are changing their current jobs more than ever.<p>Do we really write code to a machine? We should not forget that there are other people writing code in the same base source as ours.<p>There are a lot of opinions and structures that defines a code as a “good one”. It’s not necessary about the shortest code, but a better way to express what your code means.<p>All examples below were made on <a rel="nofollow noreferrer" href=https://www.ruby-lang.org/pt/>Ruby language</a><h1 id=1-naming-stuff>1. Naming Stuff<a aria-label="Anchor link for: 1-naming-stuff" class=zola-anchor href=#1-naming-stuff style=visibility:hidden></a></h1><p>Why naming stuff matters? Imagine you are joining a new company and trying to discover what this piece of code in a movies context means:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">first_elements</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">array</span><span class="z-punctuation z-separator z-ruby">,</span> <span class="z-variable z-parameter z-ruby">count</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">  array<span class="z-punctuation z-accessor z-dot z-ruby">.</span>take<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>count<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Is it clear the intention of this piece of code? The only thing that we can assume is we are taking the first elements of an array, but what is this <em>array</em>? What does <em>count</em> mean?<p>What about this:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">most_watched_movies</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">watched_movies</span><span class="z-punctuation z-separator z-ruby">,</span> <span class="z-variable z-parameter z-ruby">top_ranking</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">  watched_movies<span class="z-punctuation z-accessor z-dot z-ruby">.</span>take<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>top_ranking<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Better, right?<p>Naming things improves the communication between everyone who is coding in the same base source and as most explicit you are is better.<h1 id=2-improving-conditionals>2. Improving Conditionals<a aria-label="Anchor link for: 2-improving-conditionals" class=zola-anchor href=#2-improving-conditionals style=visibility:hidden></a></h1><p>We have some ways to improve the code conditionals, look at this:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">case</span> mobile_phone_brand
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">when</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Samsung<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">  <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Galaxy<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">when</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Apple<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">  <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>iPhone<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">when</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Xiaomi<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">  <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>MI<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Do you imagine a better way to do this <em>switch case</em>? It seems these values are supposed to be constants, so… What about this:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-constant z-ruby"><span class="z-entity z-name z-constant z-ruby">MOBILE_PHONE_BRAND</span></span> <span class="z-keyword z-operator z-assignment z-ruby">=</span> <span class="z-punctuation z-section z-scope z-ruby">{</span>
</span><span class="z-source z-ruby">   <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Samsung<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Galaxy<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span><span class="z-punctuation z-separator z-sequence z-ruby">,</span>
</span><span class="z-source z-ruby">   <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Apple<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>iPhone<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span><span class="z-punctuation z-separator z-sequence z-ruby">,</span>
</span><span class="z-source z-ruby">   <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>Xiaomi<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>MI<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby"><span class="z-punctuation z-section z-scope z-ruby">}</span>
</span></code></pre><p>We translated the entire <em>switch case</em> into a <em>hash</em>, now it’s easier to understand.<p>The next one can save your life in many times, and it is recommended by <a rel="nofollow noreferrer" href=https://github.com/rubocop/ruby-style-guide>Ruby Style Guides</a> 😊<p>Have you ever heard about <strong>early return</strong> or <strong>guard clause</strong>?<p> <p><img alt="Alt text" src=https://miro.medium.com/v2/resize:fit:4800/format:webp/1*ZUEXaTRBgZWkWSWcLHUCGw.png><p> <p>Command sequence to perform hadouken<p>“Hadouken If-Else” — <a rel="nofollow noreferrer" href=https://miro.medium.com/max/1400/1*mL04Mh-tDosU6_OlqexwyQ.jpeg>MEME REFERENCE HERE</a>:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_coins</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">user</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-control z-ruby">if</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>valid?
</span><span class="z-source z-ruby">     <span class="z-keyword z-control z-ruby">if</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>premium?
</span><span class="z-source z-ruby">       <span class="z-keyword z-control z-ruby">if</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>has_coupon?
</span><span class="z-source z-ruby">         <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> send coins
</span></span><span class="z-source z-ruby">       <span class="z-keyword z-control z-ruby">else</span> 
</span><span class="z-source z-ruby">         <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User has not a coupon<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">       <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby">     <span class="z-keyword z-control z-ruby">else</span>
</span><span class="z-source z-ruby">       <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User is not premium<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">     <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-control z-ruby">else</span>
</span><span class="z-source z-ruby">     <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User invalid<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>When you put your eyes into this piece of code it’s hard to understand what is happening, isn’t it? Calm down, we can do it better:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_coins</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-begin z-ruby">(</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-variable z-parameter z-ruby">user</span></span><span class="z-meta z-function z-parameters z-ruby"><span class="z-punctuation z-definition z-group z-end z-ruby">)</span></span>
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-pseudo-method z-ruby">return</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User invalid<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-keyword z-control z-ruby">unless</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>valid?
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-pseudo-method z-ruby">return</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User has not a coupon<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-keyword z-control z-ruby">unless</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>has_coupon?
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-pseudo-method z-ruby">return</span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-single z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">'</span>User is not premium<span class="z-punctuation z-definition z-string z-end z-ruby">'</span></span></span> <span class="z-keyword z-control z-ruby">unless</span> user<span class="z-punctuation z-accessor z-dot z-ruby">.</span>premium?
</span><span class="z-source z-ruby">
</span><span class="z-source z-ruby">  <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> send coins
</span></span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>The “Hadouken <em>if-else</em>” is over. All we did was splitting the cases into small pieces and ending the mess of the conditional decisions. It has a lot of benefits:<ul><li><p>It’s easier to maintain  </p><li><p>Avoids cognitive overload  </p><li><p>Improves readability</p></ul><p>Believe me, if you try to improve conditionals, your life (and other’s) will be better<h1 id=3-error-handling>3. Error Handling<a aria-label="Anchor link for: 3-error-handling" class=zola-anchor href=#3-error-handling style=visibility:hidden></a></h1><p>Error handling is important to make things work, if you don’t do this properly, if some exception raises it will be harder to understand what is happening in a certain context.<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_notification</span></span>
</span><span class="z-source z-ruby">  <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> do a HTTP request
</span></span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Imagine this situation, a critical notification to the context, what if some error occur in the HTTP request? In this case, it will raise some HTTP client exception (if the client deals with it) and will be hard to understand what is happening.<p>You should catch it and determine what you will do with the error:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">send_notification</span></span>
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">begin</span>
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> do a HTTP request
</span></span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">rescue</span> <span class="z-variable z-other z-constant z-ruby">StandardError</span> <span class="z-punctuation z-separator z-key-value z-ruby">=></span> error
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> do something with this error
</span></span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> could render, retry, log or send it to a monitoring system
</span></span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><blockquote class="callout tip"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M9.97308 18H11V13H13V18H14.0269C14.1589 16.7984 14.7721 15.8065 15.7676 14.7226C15.8797 14.6006 16.5988 13.8564 16.6841 13.7501C17.5318 12.6931 18 11.385 18 10C18 6.68629 15.3137 4 12 4C8.68629 4 6 6.68629 6 10C6 11.3843 6.46774 12.6917 7.31462 13.7484C7.40004 13.855 8.12081 14.6012 8.23154 14.7218C9.22766 15.8064 9.84103 16.7984 9.97308 18ZM10 20V21H14V20H10ZM5.75395 14.9992C4.65645 13.6297 4 11.8915 4 10C4 5.58172 7.58172 2 12 2C16.4183 2 20 5.58172 20 10C20 11.8925 19.3428 13.6315 18.2443 15.0014C17.624 15.7748 16 17 16 18.5V21C16 22.1046 15.1046 23 14 23H10C8.89543 23 8 22.1046 8 21V18.5C8 17 6.37458 15.7736 5.75395 14.9992Z" fill=currentColor></path></svg></div><div class=content><p>When you don’t specify the error in Ruby, it will rescue any error that extends <em>StandardError</em> class, for more information check the <a rel="nofollow noreferrer" href=https://www.honeybadger.io/blog/understanding-the-ruby-exception-hierarchy/>error hierarchy in Ruby</a></div></blockquote><blockquote class="callout warning"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12.865 3.00017L22.3912 19.5002C22.6674 19.9785 22.5035 20.5901 22.0252 20.8662C21.8732 20.954 21.7008 21.0002 21.5252 21.0002H2.47266C1.92037 21.0002 1.47266 20.5525 1.47266 20.0002C1.47266 19.8246 1.51886 19.6522 1.60663 19.5002L11.1329 3.00017C11.4091 2.52187 12.0206 2.358 12.4989 2.63414C12.651 2.72191 12.7772 2.84815 12.865 3.00017ZM4.20471 19.0002H19.7932L11.9989 5.50017L4.20471 19.0002ZM10.9989 16.0002H12.9989V18.0002H10.9989V16.0002ZM10.9989 9.00017H12.9989V14.0002H10.9989V9.00017Z" fill=currentColor></path></svg></div><div class=content><p><strong>Never</strong> rescue <em>Exception</em>, if you do it, <strong>all</strong> your system errors can be caught. The most specific your error is, the better to determine what you have to do, it’s your <em>fallback.</em></div></blockquote><h1 id=4-avoiding-unnecessary-comments>4. Avoiding Unnecessary Comments<a aria-label="Anchor link for: 4-avoiding-unnecessary-comments" class=zola-anchor href=#4-avoiding-unnecessary-comments style=visibility:hidden></a></h1><p>It seems to be simple, isn’t it? Some days ago I was coding in a legacy code and I came across the following:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby"><span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> C57
</span></span><span class="z-source z-ruby"><span class="z-meta z-function z-ruby"><span class="z-keyword z-control z-def z-ruby">def</span></span><span class="z-meta z-function z-ruby"> <span class="z-entity z-name z-function z-ruby">something</span></span>
</span><span class="z-source z-ruby">   <span class="z-keyword z-operator z-range z-ruby">...</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>Ok, now tell me… You know what C57 means? I spent a little time to realize that it means NOTHING 😅<p><img alt="Alt text" src=https://miro.medium.com/v2/resize:fit:640/format:webp/1*JxoTBullcH8srYMZVkWd1w.png><p>Unnecessary comments, keep to yourself<p>In general, unnecessary comments can make confusion and time spent and nowadays, time is money…<h1 id=5-writing-better-tests>5. Writing Better Tests<a aria-label="Anchor link for: 5-writing-better-tests" class=zola-anchor href=#5-writing-better-tests style=visibility:hidden></a></h1><p>We all know that testing is a good thing, it can avoid a lot of <em>bugs</em> and can be a documentation complement.<p>What about writing better tests?<p>When I start writing some test I put on my mind that I need to be clear because a lot of developers will use this test to understand the application rules. So, I follow the <a rel="nofollow noreferrer" href=http://xunitpatterns.com/Four%20Phase%20Test.html>Four-Phase Test Pattern</a>:<p>Tests can be separated in four steps: <em>Arrange, Act, Assert</em> and <em>Teardown.</em><blockquote class="callout tip"><div class=icon><svg viewbox="0 0 24 24" height=20 width=20 xmlns=http://www.w3.org/2000/svg><path d="M9.97308 18H11V13H13V18H14.0269C14.1589 16.7984 14.7721 15.8065 15.7676 14.7226C15.8797 14.6006 16.5988 13.8564 16.6841 13.7501C17.5318 12.6931 18 11.385 18 10C18 6.68629 15.3137 4 12 4C8.68629 4 6 6.68629 6 10C6 11.3843 6.46774 12.6917 7.31462 13.7484C7.40004 13.855 8.12081 14.6012 8.23154 14.7218C9.22766 15.8064 9.84103 16.7984 9.97308 18ZM10 20V21H14V20H10ZM5.75395 14.9992C4.65645 13.6297 4 11.8915 4 10C4 5.58172 7.58172 2 12 2C16.4183 2 20 5.58172 20 10C20 11.8925 19.3428 13.6315 18.2443 15.0014C17.624 15.7748 16 17 16 18.5V21C16 22.1046 15.1046 23 14 23H10C8.89543 23 8 22.1046 8 21V18.5C8 17 6.37458 15.7736 5.75395 14.9992Z" fill=currentColor></path></svg></div><div class=content><p>In Ruby, when we are doing transactions on database, the <em>teardown</em> occurs “automagically”, rollbacking every transaction in each final of the test</div></blockquote><p>Which can be summarized in: preparing everything for the test, stimulating what will be tested, verifying that the result is what was expected and cleaning everything that was done during that test.<p>Example:<pre class="language-ruby z-code" data-lang=ruby><code class=language-ruby data-lang=ruby><span class="z-source z-ruby">describe <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-double z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">"</span>#perform<span class="z-punctuation z-definition z-string z-end z-ruby">"</span></span></span> <span class="z-keyword z-control z-start-block z-ruby">do</span>
</span><span class="z-source z-ruby">  it <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-double z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">"</span>sends event to Sentry<span class="z-punctuation z-definition z-string z-end z-ruby">"</span></span></span> <span class="z-keyword z-control z-start-block z-ruby">do</span>   
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> Arrange
</span></span><span class="z-source z-ruby">    event <span class="z-keyword z-operator z-assignment z-ruby">=</span> <span class="z-punctuation z-section z-scope z-ruby">{</span> <span class="z-constant z-other z-symbol z-ruby">message<span class="z-punctuation z-definition z-constant z-ruby">:</span></span> <span class="z-meta z-string z-ruby"><span class="z-string z-quoted z-double z-ruby"><span class="z-punctuation z-definition z-string z-begin z-ruby">"</span>an error event<span class="z-punctuation z-definition z-string z-end z-ruby">"</span></span></span> <span class="z-punctuation z-section z-scope z-ruby">}</span>
</span><span class="z-source z-ruby">    worker <span class="z-keyword z-operator z-assignment z-ruby">=</span> described_class<span class="z-punctuation z-accessor z-dot z-ruby">.</span><span class="z-keyword z-other z-special-method z-ruby">new</span>
</span><span class="z-source z-ruby">    allow<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-variable z-other z-constant z-ruby">Raven</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>to receive<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-constant z-other z-symbol z-ruby"><span class="z-punctuation z-definition z-constant z-ruby">:</span>send_event</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>with<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>event<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby">      
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> Act
</span></span><span class="z-source z-ruby">    worker<span class="z-punctuation z-accessor z-dot z-ruby">.</span>perform<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>event<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby">
</span><span class="z-source z-ruby">    <span class="z-comment z-line z-number-sign z-ruby"><span class="z-punctuation z-definition z-comment z-ruby">#</span> Assert
</span></span><span class="z-source z-ruby">    expect<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-variable z-other z-constant z-ruby">Raven</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>to have_received<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span><span class="z-constant z-other z-symbol z-ruby"><span class="z-punctuation z-definition z-constant z-ruby">:</span>send_event</span><span class="z-punctuation z-definition z-group z-end z-ruby">)</span><span class="z-punctuation z-accessor z-dot z-ruby">.</span>with<span class="z-punctuation z-definition z-group z-begin z-ruby">(</span>event<span class="z-punctuation z-definition z-group z-end z-ruby">)</span>
</span><span class="z-source z-ruby">  <span class="z-keyword z-control z-ruby">end</span>
</span><span class="z-source z-ruby"><span class="z-keyword z-control z-ruby">end</span>
</span></code></pre><p>It’s easy to see every step of this unit test, splitting into minor pieces makes things less complicated.<h1 id=conclusion>Conclusion<a aria-label="Anchor link for: conclusion" class=zola-anchor href=#conclusion style=visibility:hidden></a></h1><p>These tips can guide you into your developer journey, your code will be cleaner and more important: will help other developers to understand your code.<p>And don’t forget:<blockquote><p>Programmers must avoid leaving false clues that obscure the meaning of code.<br> — Robert C. Martin</blockquote><p>Thanks for reading 🍻</article><div class=giscus></div></div><footer><div class=copyright><p>© 2025 João Rossi</div><div class=credits>powered by <a rel="noreferrer noopener" href=https://www.getzola.org target=_blank>zola</a> and <a rel="noreferrer noopener" href=https://github.com/isunjn/serene target=_blank>serene</a></div></footer></main></div><script src=/js/lightense.min.js></script><script src=/js/main.js></script>